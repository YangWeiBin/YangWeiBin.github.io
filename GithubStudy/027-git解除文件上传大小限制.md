# 027 git解除文件上传大小限制        
---

- github 单个文件超过50M会警告，超过100M会阻止   
## 1 [先修正错误][5]   

### 1.1 远程克隆仓库  
1. 将原有仓库备份   
2. 克隆远程仓库   
3. 用修改后的仓库内容拷贝替换    
4. 重新上传   

### 1.2 命令修正   
1. 找到大文件，并备份   
```bash
find ./ -type f -size +102400k   
```

2. 删除大文件，并提交   
```bash
$ git rm --cached giant_file
# Stage our giant file for removal, but leave it on disk

$ git commit --amend -CHEAD
# Amend the previous commit with your change
# Simply making a new commit won't work, as you need
# to remove the file from the unpushed history as well

$ git push origin master
# Push our rewritten, smaller commit

```
## 2 上传大文件   

### 2.1 修改配置文件(但是失败了)  
- 上传项目到GitHub上，当某个文件大小超过100M时，就会上传失败，因为默认的限制了上传文件大小不能超过100M。如果需要上传超过100M的文件，就需要我们自己去修改配置。   
- git命令   
```git
git config http.postBuffer 524288000
git config -l    
```

- 第二条是查看配置文件是否成功   
### 2.2 使用官方提供的LFS（Large File Storage）工具(先回退版本)    
1. [安装LFS][1]   
	- 搜索github   
	- 输入git-lfs，然后点击进行搜索。在结果里面选择第一个。  
	- wiki，下拉到下面windows，点击here。   
	- [本地位置](E:/00-software-installation/28-git-lfs-windows-v2.10.0.exe)    
2. [git命令][3]  
```git
# 测试是否成功  
git lfs install  # Updated git hooks.     #Git LFS initialized.
# 查找是否有超过100M的文件  
find ./ -type f -size +102400k   
# ./02-Head-First设计模式（中文版）高清目录.pdf

# 根据查找到的文件更改  
# git lfs track “02-Head-First设计模式（中文版）高清目录.pdf” 


# 添加即可  
git add . #添加全部文件
git commit -m “xxx”
git push
```



## 3 总结   
1. 先将大文件删除，更新其他文件，再决定是否更新大文件  
2. 使用官方提供的LFS（Large File Storage）工具比较靠谱  
3. 如果遇到误传大文件，可以回退版本，再去掉大文件的更新上传，最后在上传大文件  

## 4 参考资料    
[1]:https://jingyan.baidu.com/article/ce09321b14cda76bfe858f77.html
[2]:https://zhuanlan.zhihu.com/p/106295945
[3]:https://blog.csdn.net/xxxvvvop/article/details/83098669?depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2&utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromBaidu-2
[4]:https://blog.csdn.net/cuncaojin/article/details/100904386
[5]:https://blog.csdn.net/sinat_26227857/article/details/44037399